<div class="products-body">
    <div class="productTools">
        <form [formGroup]="addProductForm" class="addAndUpdateProduct">
            <div id="barcode">
                <span>Ürün Barkodu</span>
                <input type="number" value="{{selectedProduct?.barcode}}" formControlName="barcode">
            </div>
            <div id="productName">
                <span>Ürün İsmi</span>
                <input type="text" value="{{selectedProduct?.productName}}" formControlName="productName">
            </div>
            <div id="buyPrice">
                <span>Alış Fiyatı</span>
                <input type="number" value="{{selectedProduct?.buyPrice}}" formControlName="buyPrice">
            </div>
            <div id="sellPrice">
                <span>Satış Fiyatı 1</span>
                <input type="number" value="{{selectedProduct?.sellPrice}}" formControlName="sellPrice">
            </div>
            <div id="stockAmount">

                <span>Stok Adedi</span>
                <input id="stockAmount-input" type="number" value="{{selectedProduct?.stockAmount}}"
                    formControlName="stockAmount" style="">
            </div>
            <div id="buyPrice">
                <span>Satış Fiyatı 2</span>
                <input id="secondSellPrice" type="number" value="{{selectedProduct?.secondSellPrice}}"
                    formControlName="secondSellPrice">
            </div>
            <div class="buttons">
                <button id="addProductButton" [disabled]="!addProductForm.valid" (click)="addProduct()">Ekle</button>
                <button id="updateProductButton" [disabled]="!addProductForm.valid"
                    (click)="updateProduct()">Güncelle</button>
                <button (click)="deleteProduct()" id="deleteProductButton"
                    [disabled]="!addProductForm.valid">Sil</button>
            </div>
        </form>
        <div class="adjustStockAmount" *ngIf="selectedProduct!=undefined">

            <div class="adjustStockAmount-body">
                <span id="decreaseNumber" (click)="changeInputValue(-1)">-</span>
                <input [(ngModel)]="stockAmountInputValue" type="number" id="adjustStockAmountInput">
                <span id="increaseNumber" (click)="changeInputValue(1)">+</span>
                <div id="stocks">
                    <div id="currentStock">{{selectedProduct.stockAmount}}</div>
                    <img id="arrow" src="assets/icons/arrow-right.png" alt="Sağ ok">
                    <div id="targetStock">{{selectedProduct.stockAmount! + stockAmountInputValue!}}</div>
                </div>
                <button (click)="adjustStock()" [disabled]="selectedProduct==undefined" type="button"
                    id="adjustStockAmount-button">Stok
                    Ekle</button>
            </div>

        </div>
    </div>
    <div class="productTable-cover">
        <div id="searchBox">
            <input id="searchBox-Input" type="text" [(ngModel)]="searchValue">
        </div>
        <table id="productTable" *ngIf="productList!.length > 0">
            <tr>
                <th>Ürün Kodu</th>
                <th>Ürün İsmi</th>
                <th>Alış Fiyatı</th>
                <th>Satış Fiyatı</th>
                <th>Stok Sayısı</th>
            </tr>
            <tr *ngFor="let p of productList | productFilter:searchValue" (click)="selectProduct(p)"
                id="productListItem">
                <td id="productList-barcode" (click)="copyToClipboard(p.barcode,false)">{{p.barcode}}
                    <span id="copiedBubble" class="copiedBubble Barcode{{p.barcode}}">Kopyalandı!</span>
                </td>
                <td id="productList-name" (click)="copyToClipboard(p.barcode,true)">{{p.productName}}
                    <span id="copiedBubble" class="copiedBubble Name{{p.barcode}}">Kopyalandı!</span>
                </td>
                <td id="productList-buyPrice">{{p.buyPrice | currency:' ':"code":"1.1-2"}}</td>
                <td id="productList-sellPrices">
                    <span id="sellPrice1">{{p.sellPrice | currency:' ':"code":"1.1-2"}}</span>/
                    <span id="sellPrice2">{{p.secondSellPrice | currency:' ':"code":"1.1-2"}}</span>
                </td>
                <td id="productList-stockAmount">{{p.stockAmount}}
                    <div id="stockWarning" *ngIf="p.stockAmount! < 3"></div>
                </td>
            </tr>
        </table>
        <div id="productsNotFound" *ngIf="productList!.length == 0">
            Ürün Bulunamadı!
        </div>
    </div>
    <div class="totalInformation">
        <div class="previousStockTransactions" (click)="openOrCloseLogWindow()">
            <img src="assets/icons/arrow-up.png" alt="Yukarı">
            <span>Geçmiş İşlemler</span>
        </div>
        <div id="totalProductAmount">Toplam Ürün Sayısı <div>{{totalProductAmount}}</div>
        </div>
        <div id="totalBuyPrice">Toplam Alış Fiyatı <div>{{totalBuyPrice| currency:' ':"code":"1.1-2"}}₺</div>
        </div>
        <div id="totalSellPrice">
            Toplam Satış Fiyatı
            <div>
                <span id="primary">{{ totalSellPrice| currency:' ':"code":"1.1-2"}}₺</span>
                /
                <span id="secondary">{{totalSecondSellPrice | currency:' ':"code":"1.1-2"}}₺</span>
            </div>
        </div>
    </div>
    <div id="logWindow" class="logs" *ngIf="isLogWindowOpen">
        <div id="transactionPage" *ngFor="let logPage of logWindowPageList; index as j" class="transactionPage{{j}}">
            <div id="transaction" *ngFor="let log of logPage; index as i" class="{{log.boxType}}">
                <div id="transaction-info">{{log.info}}</div>
                <div id="transaction-productBarcode">{{log.product.barcode}}</div>
                <div id="transaction-product">{{log.product.productName}}
                    <div class="product-infoBox" id="product-infoBox{{i}}">
                        <div>Ürün İsmi: <span>{{log.product.productName}}</span></div>
                        <div>Alış Fiyatı: <span>{{log.product.buyPrice| currency:' ':"code":"1.1-2"}}₺</span></div>
                        <div>Satış Fiyatı: <span>{{log.product.sellPrice| currency:' ':"code":"1.1-2"}}₺</span></div>
                        <div>İ. Satış Fiyatı: <span>{{log.product.secondSellPrice| currency:' ':"code":"1.1-2"}}₺</span>
                        </div>
                        <div>Stok Adedi: <span>{{log.product.stockAmount}}</span></div>
                    </div>
                </div>
                <div id="transaction-productAfter" *ngIf="log.productAfter != undefined"> <img id="arrow"
                        src="assets/icons/arrow-right.png" alt="Sağ ok">{{log.productAfter.productName}}
                    <div class="product-infoBox" id="productAfter-infoBox{{i}}">
                        <div>Ürün İsmi: <span>{{log.productAfter.productName}}</span></div>
                        <div>Alış Fiyatı: <span>{{log.productAfter.buyPrice| currency:' ':"code":"1.1-2"}}₺</span></div>
                        <div>Satış Fiyatı: <span>{{log.productAfter.sellPrice| currency:' ':"code":"1.1-2"}}₺</span>
                        </div>
                        <div>İ. Satış Fiyatı: <span>{{log.productAfter.secondSellPrice|
                                currency:' ':"code":"1.1-2"}}₺</span></div>
                        <div>Stok Adedi: <span>{{log.productAfter.stockAmount}}</span></div>
                    </div>
                </div>
                <div id="transaction-buyPrice" *ngIf="log.transactionPrice != undefined">
                    <span>{{log.stockEntryAmount}}</span>Adet Ürün Eklendi: 
                    {{log.transactionPrice|
                    currency:' ':"code":"1.1-2"}}₺
                </div>
                <div id="transaction-date">{{log.date | date:"dd/MM/yyyy   HH:mm:ss"}}</div>
            </div>
        </div>
        <div id="pageSelectors">
            <div id="selector" *ngFor="let logPage of logWindowPageList; index as i" class="" (click)="toPage(i)">
            </div>
        </div>
    </div>
</div>